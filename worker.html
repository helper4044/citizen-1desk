<!DOCTYPE html>
<html>
<head>
<title>CitizenDesk ‚Äì Worker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:linear-gradient(135deg,#0f2027,#203a43);color:#fff}
header{background:#081821;padding:14px;text-align:center;font-weight:bold}
.wrap{max-width:800px;margin:30px auto}
.card{
  background:#122733;padding:16px;border-radius:14px;
  border:2px solid #00ffcc;margin-bottom:16px
}
img{width:100%;border-radius:10px;margin-top:10px}
.btn{padding:8px 14px;border-radius:6px;border:0;font-weight:bold;cursor:pointer}
.route{background:#007bff;color:#fff}
.clean{background:#00ffcc;color:#000}
.logout{background:transparent;color:#00ffcc;border:2px solid #00ffcc}
.note{font-size:13px;color:#ccc;margin-top:6px}
</style>
</head>
<body>

<header>Worker Dashboard ‚Äì CitizenDesk</header>

<div class="wrap">

  <div class="card">
    <b>Latest Complaint</b><br><br>

    <div id="imgBox"></div>

    <p class="note" id="locNote"></p>

    <br>
    <button class="btn route" id="routeBtn">üó∫ Route to Location</button>
    <button class="btn clean">Mark Cleaned</button>
  </div>

  <button class="btn logout" onclick="location.href='index.html'">Logout</button>

</div>

<script>
const img = localStorage.getItem("complaintImage");
const lat = localStorage.getItem("complaintLat");
const lng = localStorage.getItem("complaintLng");

const imgBox = document.getElementById("imgBox");
const routeBtn = document.getElementById("routeBtn");
const locNote = document.getElementById("locNote");

// ‚úÖ SHOW IMAGE IF AVAILABLE
if(img){
  imgBox.innerHTML = "<img src='"+img+"'>";
}else{
  imgBox.innerHTML = "<p>No image submitted</p>";
}

// ‚úÖ SHOW ROUTE TO REAL PINNED LOCATION
if(lat && lng){
  routeBtn.onclick = function(){
    const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lng}`;
    window.open(url, "_blank");
  };
  locNote.textContent = "üìç Live pinned location available for navigation.";
}else{
  routeBtn.disabled = true;
  locNote.textContent = "‚ùå No location found yet.";
}
</script>

</body>
</html>